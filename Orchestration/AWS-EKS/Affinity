Affinity and anti-affinity


Affinity and anti-affinity
nodeSelector provides a very simple way to constrain pods to nodes with particular labels.
The affinity/anti-affinity feature, currently in beta, greatly extends the types of constraints you can express. The key enhancements are:

The language is more expressive (not just “AND of exact match”)
You can indicate that the rule is “soft”/“preference” rather than a hard requirement,
so if the scheduler can’t satisfy it, the pod will still be scheduled
You can constrain against labels on other pods running on the node (or other topological domain),
rather than against labels on the node itself, which allows rules about which pods can and cannot be co-located


kubectl label nodes ip-192-168-15-64.us-west-2.compute.internal azname=az1
